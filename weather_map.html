<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Weather Map Project Lee</title>
    </head>
    <body>

        <div id="main-heading">
            <span class="badge badge-block badge-primary"><header>Weather App</header></span>
        </div>

        <div id="search-bar">
            <span>
                Place
                <input type="text" placeholder="City, State"><button>Find</button>
            </span>
        </div>




        <!-- todo jQuery/AJAX, KEY, and Bootstrap -->
        <!-- First use the AJAX jQuery from google CDN -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

        <!-- Then used my "key" from js folder which will NOT be pushed to github (.gitignore) -->
        <script src="js/keys.js"></script>

        <!-- Bootstrap CDN -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

        <!-- Now AJAX -->
        <script>

            // todo Start by showing the current conditions for city you live in on your page
            // From https://openweathermap.org/current

            "use strict";
            (function () {
                    // For one day weather cast
                    // var currentURL = "http://api.openweathermap.org/data/2.5/weather?q=Dallas,Texas&units=imperial&appid="+OpenWeatherMap_Key;
                    //
                    // $.get(currentURL)
                    // .done(function (weatherData) {
                    //     console.log(weatherData);
                    //     console.log(weatherData.weather[0].icon);
                    //     console.log(weatherData.coord);
                    //     console.log(weatherData.weather[0].description)
                    //
                    //     var testingHTML = "";
                    //
                    //     testingHTML = "<h1>" + weatherData.weather[0].description + "</h1>"
                    //
                    //     $("#testing").append(testingHTML);
                    // }).fail(function (error) {
                    //     console.log(error);
                    // });


                // Forecast
                $.get("http://api.openweathermap.org/data/2.5/forecast", {
                    APPID: OpenWeatherMap_Key,
                    q: "Dallas, US",
                    "units": "imperial"
                }).done(function (weatherData) {
                    console.log(weatherData);
                    console.log(weatherData.list[0].main); // focus on first value
                    console.log(weatherData.list[0].dt_txt); // will give you the dates (2020-04-16 21:00:00)
                    console.log(typeof (weatherData.list[0].dt_txt)); // string
                    console.log((weatherData.list[0].dt_txt).slice(0, 10)); // will slice the timeline (2020-04-16)
                    console.log(weatherData.list[0].weather[0].icon); //weather icon
                    console.log(weatherData.list[0].main.temp_max + " Degrees F");
                    console.log(weatherData.list[0].main.temp_min + " Degrees F"); // &#8457; for fahrenheit HTML
                    console.log(weatherData.list[0].main.temp_max + " F " + " / " +weatherData.list[0].main.temp_min + " F")
                    console.log(weatherData.list[0].weather[0].description); // Description
                    console.log(weatherData.list[0].main.humidity); // humidity
                    console.log(weatherData.list[0].wind.speed); // wind speed miles per hours;
                    console.log(weatherData.list[0].main.pressure); // hPa (hecto Pascal)


                    // var imgUrl = "http://openweathermap.org/img/w/"+weather[0].icon+".png";
                    // $(".card-img").attr('src', imgUrl);

                    // var newDate = ""; // "" string {} obj [] arry   // list[x]
                    // var newTemp = "";                               // list[x]
                    var newIcon = "http://openweathermap.org/img/w/" + weatherData.list[0].weather[0].icon + ".png";
                    $(".weather-icon").attr('src', newIcon);        // list[x]  weather-icon
                    var newDes = "";                                // list[x]
                    var newHum = "";                                // list[x]
                    var newWind = "";                               // list[x]
                    var newPres  = "";                              // list[x]

                    // newDate = ((weatherData.list[0].dt_txt).slice(0, 10));
                    // $(".date").append(newDate);

                    // newTemp = ("<strong>" +weatherData.list[0].main.temp_max + " ºF " + "</strong>" + " / " + "<strong>" + weatherData.list[0].main.temp_min + " ºF" + "</strong>");
                    // $(".temp").append(newTemp);

                    newDes = ("Desciption: " + "<strong>" + weatherData.list[0].weather[0].description + "</strong>");
                    $(".des").append(newDes)

                    newHum = ("Humidity: " + "<strong>" + weatherData.list[0].main.humidity + " %" + "</strong>");
                    $(".humid").append(newHum);

                    newWind = ("Wind: " + "<strong>" + weatherData.list[0].wind.speed + " mph" + "</strong>");
                    $(".wind").append(newWind);

                    newPres = ("Pressure: " + "<strong>" + weatherData.list[0].main.pressure + " hPa" + "</strong>");
                    $(".press").append(newPres);

                    //  Noticed that every 8th listed item will changed date.

                    //  for loop for 5 days of forecast
                    //  for (var x = 0; x < 5; x ++) {
                    //      newTest = ((weatherData.list[x].dt_txt).slice(0, 10));
                    //      $(".date").append(newTest);
                    //     } // todo result was spreading out all 5 days in one section...

                    var newDate = "";
                    var newTemp = "";


                    for (var x = 0; x < 40; x += 8) {
                        newDate = ((weatherData.list[x].dt_txt).slice(0, 10));
                        newTemp = ("<strong>" + weatherData.list[x].main.temp_max + " ºF " + "</strong>" + " / " + "<strong>" + weatherData.list[x].main.temp_min + " ºF" + "</strong>");
                        console.log((weatherData.list[x].dt_txt).slice(0, 10));
                        console.log(x);
                        console.log(weatherData.list[x].main.temp_max);

                        $("#date1").append(newDate);
                        $(".temp").append(newTemp);

                    }



                }).fail(function (error) {
                    console.log(error);
                });



            }) ();
        </script>

    </body>
</html>